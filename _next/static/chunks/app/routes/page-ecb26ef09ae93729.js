(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{94:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(5155),a=r(7909),n=r(2115);let i=(0,a.default)(()=>Promise.all([r.e(761),r.e(893)]).then(r.bind(r,6893)),{loadableGenerated:{webpack:()=>[6893]},ssr:!1}),l=(0,n.memo)(function(e){let{polyline:t,height:r=320,center:a,zoom:l=13}=e,c=(0,n.useMemo)(()=>{if(a)return a;if(t&&t.length>0){let e=t[0];return[e[0],e[1]]}return[39.905,-75.353]},[a,t]),o=(0,n.useMemo)(()=>{if(!t||0===t.length)return;let e=1/0,r=1/0,s=-1/0,a=-1/0;for(let n of t){let[t,i]=n;Number.isFinite(t)&&Number.isFinite(i)&&(t<e&&(e=t),i<r&&(r=i),t>s&&(s=t),i>a&&(a=i))}if(Number.isFinite(e)&&Number.isFinite(r)&&Number.isFinite(s)&&Number.isFinite(a))return[[e,r],[s,a]]},[t]);return(0,s.jsx)(i,{polyline:t,height:r,center:c,zoom:l,bounds:o})})},849:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var s=r(5155),a=r(4466),n=r(1751),i=r(6411),l=r(2909),c=r(8230),o=r(3272),u=r(2115);let d=[{key:"traffic",label:"Traffic"},{key:"elevation",label:"Elevation"},{key:"scenic",label:"Scenic"},{key:"surface",label:"Surface"},{key:"safety",label:"Safety"},{key:"access",label:"Access"}],m=(0,u.memo)(function(e){let{ratings:t,size:r=280}=e,u=d.map(e=>{var r;let{key:s,label:a}=e;return{label:a,value:Math.max(0,Math.min(10,null!=(r=t[s])?r:0))}});return(0,s.jsx)("div",{style:{width:r,height:r},children:(0,s.jsx)(a.u,{width:"100%",height:"100%",children:(0,s.jsxs)(n.V,{data:u,outerRadius:"80%",children:[(0,s.jsx)(i.z,{gridType:"polygon"}),(0,s.jsx)(l.r,{dataKey:"label",tick:{fontSize:12}}),(0,s.jsx)(c.E,{angle:30,domain:[0,10],tickCount:6}),(0,s.jsx)(o.V,{dataKey:"value",stroke:"#2563eb",fill:"#60a5fa",fillOpacity:.45})]})})})})},2866:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(5155),a=r(2115),n=r(2619),i=r.n(n),l=r(94),c=r(849),o=r(8056),u=r(4126);function d(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)("newest");(0,a.useEffect)(()=>{t((0,o.aB)())},[]);let d=(0,a.useMemo)(()=>e.map(e=>{if("number"==typeof e.distanceMeters&&"number"==typeof e.elevationGainMeters)return e;try{let{distanceMeters:t,elevationGainMeters:r}=(0,u.U)(e.gpxText);return{...e,distanceMeters:t,elevationGainMeters:r}}catch(t){return e}}),[e]),m=(()=>{let e=[...d];switch(r){case"distance-asc":return e.sort((e,t)=>{var r,s;return(null!=(r=e.distanceMeters)?r:0)-(null!=(s=t.distanceMeters)?s:0)});case"distance-desc":return e.sort((e,t)=>{var r,s;return(null!=(r=t.distanceMeters)?r:0)-(null!=(s=e.distanceMeters)?s:0)});case"traffic-desc":return e.sort((e,t)=>t.traffic-e.traffic);case"elevation-desc":return e.sort((e,t)=>t.elevation-e.elevation);case"scenic-desc":return e.sort((e,t)=>t.scenic-e.scenic);case"surface-desc":return e.sort((e,t)=>t.surface-e.surface);case"safety-desc":return e.sort((e,t)=>t.safety-e.safety);case"access-desc":return e.sort((e,t)=>t.access-e.access);default:return e.sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}})();return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold mb-6 text-gray-800",children:"Team Favorite Routes"}),(0,s.jsxs)("div",{className:"mb-4 flex items-center gap-3",children:[(0,s.jsx)("label",{className:"text-sm text-gray-700",children:"Sort by:"}),(0,s.jsxs)("select",{className:"border border-gray-300 rounded-lg p-2 text-sm",value:r,onChange:e=>n(e.target.value),children:[(0,s.jsx)("option",{value:"newest",children:"Newest"}),(0,s.jsx)("option",{value:"distance-asc",children:"Distance ↑"}),(0,s.jsx)("option",{value:"distance-desc",children:"Distance ↓"}),(0,s.jsx)("option",{value:"scenic-desc",children:"Scenic ↓"}),(0,s.jsx)("option",{value:"elevation-desc",children:"Elevation rating ↓"}),(0,s.jsx)("option",{value:"traffic-desc",children:"Traffic rating ↓"}),(0,s.jsx)("option",{value:"surface-desc",children:"Surface rating ↓"}),(0,s.jsx)("option",{value:"safety-desc",children:"Safety rating ↓"}),(0,s.jsx)("option",{value:"access-desc",children:"Access rating ↓"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:null==m?void 0:m.map(e=>{let t=JSON.parse(e.polyline);return(0,s.jsxs)(i(),{href:"/routes/detail?id=".concat(encodeURIComponent(e.id)),title:"Open ".concat(e.title),className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden hover:shadow transition-shadow",children:[(0,s.jsxs)("div",{className:"p-5",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:e.title}),(0,s.jsxs)("p",{className:"text-gray-600",children:["by ",e.author]}),(0,s.jsxs)("div",{className:"text-gray-700 text-sm mt-1 mb-3 flex gap-4 flex-wrap",children:["number"==typeof e.distanceMeters?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Distance:"})," ",(e.distanceMeters/1609.344).toFixed(2)," mi"]}):null,"number"==typeof e.elevationGainMeters?(0,s.jsxs)("span",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Gain:"})," ",Math.round(e.elevationGainMeters)," m"]}):null]}),e.description?(0,s.jsx)("p",{className:"text-gray-700 text-sm line-clamp-3 mb-2",children:e.description}):null]}),(0,s.jsx)(l.A,{polyline:t,height:220}),(0,s.jsx)("div",{className:"flex justify-center mt-4 p-5 pt-3",children:(0,s.jsx)(c.A,{ratings:{traffic:e.traffic,elevation:e.elevation,scenic:e.scenic,surface:e.surface,safety:e.safety,access:e.access},size:200})})]},e.id)})})]})}},3013:(e,t,r)=>{Promise.resolve().then(r.bind(r,2866))},4126:(e,t,r)=>{"use strict";function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(e.length<=t)return e;let r=Math.floor((e.length-2)/(t-2)),s=[e[0]];for(let t=r;t<e.length-1;t+=r)s.push(e[t]);return s.push(e[e.length-1]),s}function a(e){let t=new DOMParser().parseFromString(e,"application/xml"),r=Array.from(t.getElementsByTagName("trkpt"));if(0===r.length)try{r=Array.from(t.getElementsByTagNameNS("*","trkpt"))}catch(e){}0===r.length&&(r=Array.from(t.querySelectorAll("[lat][lon]")));let a=r.map(e=>[Number(e.getAttribute("lat")),Number(e.getAttribute("lon")),Number(e.getAttribute("ele"))]).filter(e=>{let[t,r]=e;return Number.isFinite(t)&&Number.isFinite(r)}),n=e=>e*Math.PI/180,i=0,l=0;for(let e=1;e<a.length;e++){let[t,r,s]=a[e-1],[c,o,u]=a[e],d=n(c-t),m=n(o-r),f=Math.sin(d/2)**2+Math.cos(n(t))*Math.cos(n(c))*Math.sin(m/2)**2;if(i+=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f))*6371e3,Number.isFinite(s)&&Number.isFinite(u)){let e=u-s;e>0&&(l+=e)}}let c=s(a.map(e=>{let[t,r]=e;return[t,r]})),o=c.length>0?c[0]:[39.905,-75.353];return{polyline:c,center:o,distanceMeters:i,elevationGainMeters:l}}r.d(t,{U:()=>a,u:()=>s})},8056:(e,t,r)=>{"use strict";r.d(t,{Fq:()=>i,aB:()=>n,o6:()=>l,z9:()=>c});let s="swat-routes",a="swat-comments";function n(){try{return JSON.parse(localStorage.getItem(s)||"[]")}catch(e){return[]}}function i(e){let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()},r=n();return r.unshift(t),localStorage.setItem(s,JSON.stringify(r)),t}function l(e){try{return JSON.parse(localStorage.getItem(a)||"[]").filter(t=>t.routeId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}catch(e){return[]}}function c(e){let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()},r=JSON.parse(localStorage.getItem(a)||"[]");return r.unshift(t),localStorage.setItem(a,JSON.stringify(r)),t}}},e=>{e.O(0,[856,619,441,255,358],()=>e(e.s=3013)),_N_E=e.O()}]);