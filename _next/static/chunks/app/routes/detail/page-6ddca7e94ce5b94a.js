(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[135],{72:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(7260),n=r(94),i=r(849),o=r(8056);function c(e){let{routeId:t}=e,[r,l]=(0,s.useState)([]),[n,i]=(0,s.useState)(""),[c,d]=(0,s.useState)(""),[u,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{l((0,o.o6)(t))},[t]);let x=async()=>{if(n&&c){m(!0);try{(0,o.z9)({author:n,body:c,routeId:t}),l((0,o.o6)(t)),i(""),d("")}finally{m(!1)}}};return(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-gray-800",children:"Comments"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Your name",value:n,onChange:e=>i(e.target.value),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("textarea",{placeholder:"Add a comment...",value:c,onChange:e=>d(e.target.value),rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-vertical"}),(0,a.jsx)("button",{onClick:x,disabled:!n||!c||u,className:"px-6 py-3 rounded-lg font-medium transition-colors ".concat(n&&c&&!u?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:u?"Posting...":"Post Comment"})]}),(0,a.jsx)("div",{className:"space-y-4 mt-6",children:null==r?void 0:r.map(e=>(0,a.jsxs)("div",{className:"p-4 border border-gray-200 rounded-lg bg-gray-50",children:[(0,a.jsx)("div",{className:"font-semibold text-gray-800",children:e.author}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:new Date(e.createdAt).toLocaleString()}),(0,a.jsx)("div",{className:"text-gray-700",children:e.body})]},e.id))})]})}function d(){var e;let t=(0,l.useSearchParams)(),r=(0,l.useRouter)(),d=null!=(e=t.get("id"))?e:void 0,[u,m]=(0,s.useState)(null);(0,s.useEffect)(()=>{d&&m((0,o.aB)().find(e=>e.id===d)||null)},[d]);let x=(0,s.useMemo)(()=>{if(!u)return[];try{return JSON.parse(u.polyline)}catch(e){return[]}},[u]);return d?u?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold mb-2 text-gray-800",children:u.title}),(0,a.jsxs)("p",{className:"text-gray-600 mb-6",children:["by ",u.author]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden",children:[(0,a.jsx)(n.A,{polyline:x,height:420}),(0,a.jsx)("div",{className:"flex gap-2 p-5",children:(0,a.jsx)("button",{onClick:()=>{try{let e=new Blob([u.gpxText],{type:"application/gpx+xml"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="".concat(u.title.replace(/\s+/g,"_"),".gpx"),document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(t),0)}catch(e){}},className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",children:"Download GPX"})})]}),(0,a.jsx)("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm p-5 mt-6 flex justify-center",children:(0,a.jsx)(i.A,{ratings:{traffic:u.traffic,elevation:u.elevation,scenic:u.scenic,surface:u.surface,safety:u.safety,access:u.access},size:300})}),(0,a.jsx)("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm p-5 mt-6",children:(0,a.jsx)(c,{routeId:u.id})})]}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white shadow-sm p-6 text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Route not found"}),(0,a.jsx)("div",{className:"text-gray-600 mb-4",children:"The route you selected is not in local storage."}),(0,a.jsx)("button",{className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",onClick:()=>r.push("/routes"),children:"Back to Routes"})]})}):null}function u(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:"Loadingâ€¦"}),children:(0,a.jsx)(d,{})})}},94:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(7909),l=r(2115);let n=(0,s.default)(()=>Promise.all([r.e(761),r.e(893)]).then(r.bind(r,6893)),{loadableGenerated:{webpack:()=>[6893]},ssr:!1}),i=(0,l.memo)(function(e){let{polyline:t,height:r=320,center:s,zoom:i=13}=e,o=(0,l.useMemo)(()=>{if(s)return s;if(t&&t.length>0){let e=t[0];return[e[0],e[1]]}return[39.905,-75.353]},[s,t]),c=(0,l.useMemo)(()=>{if(!t||0===t.length)return;let e=1/0,r=1/0,a=-1/0,s=-1/0;for(let l of t){let[t,n]=l;Number.isFinite(t)&&Number.isFinite(n)&&(t<e&&(e=t),n<r&&(r=n),t>a&&(a=t),n>s&&(s=n))}if(Number.isFinite(e)&&Number.isFinite(r)&&Number.isFinite(a)&&Number.isFinite(s))return[[e,r],[a,s]]},[t]);return(0,a.jsx)(n,{polyline:t,height:r,center:o,zoom:i,bounds:c})})},849:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var a=r(5155),s=r(4466),l=r(1751),n=r(6411),i=r(2909),o=r(8230),c=r(3272),d=r(2115);let u=[{key:"traffic",label:"Traffic"},{key:"elevation",label:"Elevation"},{key:"scenic",label:"Scenic"},{key:"surface",label:"Surface"},{key:"safety",label:"Safety"},{key:"access",label:"Access"}],m=(0,d.memo)(function(e){let{ratings:t,size:r=280}=e,d=u.map(e=>{var r;let{key:a,label:s}=e;return{label:s,value:Math.max(0,Math.min(10,null!=(r=t[a])?r:0))}});return(0,a.jsx)("div",{style:{width:r,height:r},children:(0,a.jsx)(s.u,{width:"100%",height:"100%",children:(0,a.jsxs)(l.V,{data:d,outerRadius:"80%",children:[(0,a.jsx)(n.z,{gridType:"polygon"}),(0,a.jsx)(i.r,{dataKey:"label",tick:{fontSize:12}}),(0,a.jsx)(o.E,{angle:30,domain:[0,10],tickCount:6}),(0,a.jsx)(c.V,{dataKey:"value",stroke:"#2563eb",fill:"#60a5fa",fillOpacity:.45})]})})})})},2093:(e,t,r)=>{Promise.resolve().then(r.bind(r,72))},8056:(e,t,r)=>{"use strict";r.d(t,{Fq:()=>n,aB:()=>l,o6:()=>i,z9:()=>o});let a="swat-routes",s="swat-comments";function l(){try{return JSON.parse(localStorage.getItem(a)||"[]")}catch(e){return[]}}function n(e){let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()},r=l();return r.unshift(t),localStorage.setItem(a,JSON.stringify(r)),t}function i(e){try{return JSON.parse(localStorage.getItem(s)||"[]").filter(t=>t.routeId===e).sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime())}catch(e){return[]}}function o(e){let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date().toISOString()},r=JSON.parse(localStorage.getItem(s)||"[]");return r.unshift(t),localStorage.setItem(s,JSON.stringify(r)),t}}},e=>{e.O(0,[856,441,255,358],()=>e(e.s=2093)),_N_E=e.O()}]);